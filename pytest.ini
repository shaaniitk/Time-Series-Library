[pytest]
markers =
    slow: long-running tests (e.g., scaling / large param sweeps)
    extended: extended validation not required for basic CI
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning
addopts = -ra
[pytest]
# Central test discovery constrained to tests/ to avoid legacy or stray files
# Layered execution strategy markers:
# - smoke: always-on, <2s individual tests, core instantiation & shape checks
# - extended: functional coverage beyond smoke; moderate runtime
# - perf: performance / benchmark oriented; may be skipped in default CI
# - quarantine: flaky or high-cost tests awaiting stabilization; excluded from default + extended
# Default CI invocation suggestion: pytest -m "not perf and not quarantine"
# Include new modular split tests (kept outside legacy 'tests/')
# Limit to integration subfolder rather than whole TestsModule to avoid collecting meta/quarantine utilities.
testpaths =
    tests
    TestsModule
python_files = test_*.py
addopts = -ra
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning
markers =
    smoke: Fast minimal surface tests
    extended: Broader functional coverage tests (not perf-heavy)
    perf: Performance / benchmark tests
    quarantine: Flaky or high-cost tests excluded from normal pipelines
    legacy: Legacy monolith-era tests gated behind --include-legacy or INCLUDE_LEGACY_TESTS=1